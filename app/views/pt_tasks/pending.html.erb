<% provide(:title, 'pending PT tasks') %>
<% provide(:name, 'pending_PT_tasks') %>

<% content_for :content do %>

<div class="c-normal-card-box">
  <p id="notice"><%= notice %></p>
  <div class="c-gap-bottom c-text-right link-row">
    <%= link_to t('.pt-tasks'), pt_tasks_path, class: 'fnpu-link' %>
    <%= link_to t('.completed-pt-task'), completed_pt_task_path, class: 'fnpu-link' %>
  </div>

  <div id="app">
    <pt-task-log></pt-task-log>
  </div>
  <%= will_paginate @ci_packages, :renderer => PaginationListLinkRenderer %>
</div>



<% end %>
<% content_for :foot do%>
  <script name="pending_PT_tasks">
    (function() {
      window.gc = window.gc || {};
      gc = <%= raw @pt_tasks.to_json %>;
    })();
  (function addShowLogMark() {
    if (gc.length === 0) return;
    gc.forEach(function(element, index) {
      element.showLogs = false;
      element.log = {};
      element.gc = null;
    });
  })();
  </script>
  <%= javascript_pack_tag 'ptTaskLog', name: "ptTaskProgress" %>
<% end %>