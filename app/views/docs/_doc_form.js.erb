var myTextArea = document.getElementsByClassName('doc-input-textarea-placeholder')[0];
var myCodeMirror = CodeMirror(function(elt) {
  myTextArea.parentNode.replaceChild(elt, myTextArea);
}, {
    value: "<%= @doc.content %>",
    lineWrapping: true,
    lineNumbers: true
});
document.getElementsByClassName('save-document')[0].addEventListener('click', function(ev) {
    ev.preventDefault();
    var val = myCodeMirror.getValue();
    console.log(val);
    document.getElementsByClassName('doc-input-textarea')[0].value = val;
    document.doc_form.submit();
});