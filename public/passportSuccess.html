<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>success</title>
</head>
<body>
    <h1>login success.</h1>   
    <script>
        (function() {

          var httpRequest;

          function makeRequest(url) {
            httpRequest = new XMLHttpRequest();

            if (!httpRequest) {
              console.log('Giving up :( Cannot create an XMLHTTP instance');
              return false;
            }
            httpRequest.onreadystatechange = alertContents;
            httpRequest.open('GET', url);
            httpRequest.send();
          }

          function alertContents() {
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
              if (httpRequest.status === 200) {
                postMsgToParent(httpRequest.responseText);
              } else {
                console.log('There was a problem with the request.');
              }
            }
          }

          var reqUrl = window.location.origin + '/returnreqcookie?format=json';
          makeRequest(reqUrl);
          function postMsgToParent(msg) {
            console.log(msg);
            parent.postMessage(msg,"*");
          }
         
        })();

    </script>

</body>
</html>